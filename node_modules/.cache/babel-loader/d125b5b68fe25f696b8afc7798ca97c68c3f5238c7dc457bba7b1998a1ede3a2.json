{"ast":null,"code":"import axios from 'axios';\nimport { toast } from 'react-toastify';\n\n// Configuration Constants\nconst API_CONFIG = {\n  BASE_URL: process.env.REACT_APP_API_BASE_URL || 'http://localhost:5000/api',\n  TIMEOUT: parseInt(process.env.REACT_APP_API_TIMEOUT) || 30000,\n  SESSION_TIMEOUT: parseInt(process.env.REACT_APP_SESSION_TIMEOUT) || 60 * 1000,\n  WARNING_TIME: parseInt(process.env.REACT_APP_WARNING_TIME) || 45 * 1000,\n  CHECK_INTERVAL: parseInt(process.env.REACT_APP_CHECK_INTERVAL) || 10000,\n  CURRENT_USER: 'raj2080'\n};\n\n// Storage Keys\nconst STORAGE_KEYS = {\n  TOKEN: 'token',\n  USER_ID: 'userId',\n  USER: 'user',\n  REFRESH_TOKEN: 'refreshToken',\n  LAST_ACTIVE: 'lastActive',\n  SESSION_ID: 'sessionId',\n  SESSION_START: 'sessionStart',\n  SESSION_WARNING_SHOWN: 'sessionWarningShown',\n  REMEMBER_ME: 'rememberMe',\n  REMEMBERED_EMAIL: 'rememberedEmail',\n  LOGIN_IN_PROGRESS: 'loginInProgress'\n};\n\n// Utility Functions\nconst getCurrentUTCDateTime = () => {\n  const now = new Date();\n  const year = now.getUTCFullYear();\n  const month = String(now.getUTCMonth() + 1).padStart(2, '0');\n  const day = String(now.getUTCDate()).padStart(2, '0');\n  const hours = String(now.getUTCHours()).padStart(2, '0');\n  const minutes = String(now.getUTCMinutes()).padStart(2, '0');\n  const seconds = String(now.getUTCSeconds()).padStart(2, '0');\n  return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\n};\nconst getStoredUserData = () => {\n  try {\n    const userData = localStorage.getItem(STORAGE_KEYS.USER);\n    return userData ? JSON.parse(userData) : null;\n  } catch (error) {\n    console.error('Error getting user data:', error);\n    return null;\n  }\n};\nconst getSystemInfo = () => {\n  const userData = getStoredUserData();\n  return {\n    userAgent: navigator.userAgent,\n    platform: navigator.platform,\n    language: navigator.language,\n    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n    screenResolution: `${window.screen.width}x${window.screen.height}`,\n    timestamp: getCurrentUTCDateTime(),\n    currentUser: (userData === null || userData === void 0 ? void 0 : userData.nickname) || API_CONFIG.CURRENT_USER\n  };\n};\nconst clearStorage = (preserveEmail = false) => {\n  if (localStorage.getItem(STORAGE_KEYS.LOGIN_IN_PROGRESS)) {\n    return;\n  }\n  const rememberedEmail = preserveEmail ? localStorage.getItem(STORAGE_KEYS.REMEMBERED_EMAIL) : null;\n  Object.keys(localStorage).forEach(key => {\n    if (key !== STORAGE_KEYS.REMEMBERED_EMAIL || !preserveEmail) {\n      try {\n        localStorage.removeItem(key);\n        sessionStorage.removeItem(key);\n      } catch (error) {\n        console.error(`Error clearing storage key ${key}:`, error);\n      }\n    }\n  });\n  if (preserveEmail && rememberedEmail) {\n    localStorage.setItem(STORAGE_KEYS.REMEMBERED_EMAIL, rememberedEmail);\n  }\n};\nconst updateStoredUserData = userData => {\n  if (!userData) return;\n  const currentDateTime = getCurrentUTCDateTime();\n  const storedUser = {\n    ...userData,\n    lastActive: currentDateTime,\n    lastUpdated: currentDateTime,\n    systemInfo: getSystemInfo()\n  };\n  try {\n    localStorage.setItem(STORAGE_KEYS.USER, JSON.stringify(storedUser));\n    localStorage.setItem(STORAGE_KEYS.LAST_ACTIVE, currentDateTime);\n  } catch (error) {\n    console.error('Error updating user data:', error);\n    throw new Error('Failed to update user data');\n  }\n};\nconst checkSessionExpiry = () => {\n  if (localStorage.getItem(STORAGE_KEYS.LOGIN_IN_PROGRESS)) {\n    return false;\n  }\n  const lastActive = localStorage.getItem(STORAGE_KEYS.LAST_ACTIVE);\n  if (!lastActive) return true;\n  const currentTime = new Date().getTime();\n  const lastActiveTime = new Date(lastActive).getTime();\n  const timeDifference = currentTime - lastActiveTime;\n  if (timeDifference > API_CONFIG.WARNING_TIME && !localStorage.getItem(STORAGE_KEYS.SESSION_WARNING_SHOWN)) {\n    toast.warning('Your session will expire soon. Please save your work.', {\n      toastId: 'session-warning'\n    });\n    localStorage.setItem(STORAGE_KEYS.SESSION_WARNING_SHOWN, 'true');\n  }\n  return timeDifference > API_CONFIG.SESSION_TIMEOUT;\n};\n\n// API Instance\nconst Api = axios.create({\n  baseURL: API_CONFIG.BASE_URL,\n  timeout: API_CONFIG.TIMEOUT,\n  withCredentials: true,\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json'\n  }\n});\n\n// Request Interceptor\nApi.interceptors.request.use(config => {\n  const token = localStorage.getItem(STORAGE_KEYS.TOKEN);\n  const currentDateTime = getCurrentUTCDateTime();\n  if (!config.url.includes('/login') && checkSessionExpiry()) {\n    clearStorage(true);\n    window.location.href = '/login?session=expired';\n    return Promise.reject('Session expired');\n  }\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  config.metadata = {\n    startTime: new Date().getTime(),\n    requestId: Math.random().toString(36).substring(7),\n    timestamp: currentDateTime,\n    systemInfo: getSystemInfo()\n  };\n  localStorage.setItem(STORAGE_KEYS.LAST_ACTIVE, currentDateTime);\n  return config;\n}, error => Promise.reject(handleApiError(error)));\n\n// Response Interceptor\nApi.interceptors.response.use(response => {\n  const currentDateTime = getCurrentUTCDateTime();\n  localStorage.setItem(STORAGE_KEYS.LAST_ACTIVE, currentDateTime);\n  return {\n    ...response,\n    timestamp: currentDateTime,\n    duration: new Date().getTime() - response.config.metadata.startTime\n  };\n}, error => {\n  var _error$response;\n  if (!error.config.url.includes('/login') && ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n    clearStorage(true);\n    window.location.href = '/login?session=expired';\n  }\n  return Promise.reject(handleApiError(error));\n});\n\n// Error Handler\nconst handleApiError = error => {\n  var _error$response2, _error$response2$data, _error$response3, _error$response4;\n  const errorMessage = ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || error.message || 'An unexpected error occurred';\n  const currentDateTime = getCurrentUTCDateTime();\n  const userData = getStoredUserData();\n  console.error('API Error:', {\n    message: errorMessage,\n    timestamp: currentDateTime,\n    currentUser: (userData === null || userData === void 0 ? void 0 : userData.nickname) || API_CONFIG.CURRENT_USER,\n    error: error\n  });\n  if (!error.config.url.includes('/login')) {\n    toast.error(errorMessage);\n  }\n  return {\n    message: errorMessage,\n    timestamp: currentDateTime,\n    status: (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status,\n    data: (_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data\n  };\n};\n\n// API Functions\nconst loginApi = async data => {\n  try {\n    var _response$data;\n    localStorage.setItem(STORAGE_KEYS.LOGIN_IN_PROGRESS, 'true');\n    const currentDateTime = getCurrentUTCDateTime();\n    const loginData = {\n      ...data,\n      timestamp: currentDateTime,\n      systemInfo: getSystemInfo()\n    };\n    const response = await Api.post('/users/login', loginData);\n    if ((_response$data = response.data) !== null && _response$data !== void 0 && _response$data.success) {\n      const {\n        user,\n        token\n      } = response.data.data;\n      const sessionId = Math.random().toString(36).substring(7);\n      localStorage.setItem(STORAGE_KEYS.TOKEN, token);\n      localStorage.setItem(STORAGE_KEYS.USER_ID, user._id);\n      localStorage.setItem(STORAGE_KEYS.SESSION_ID, sessionId);\n      localStorage.setItem(STORAGE_KEYS.SESSION_START, currentDateTime);\n      localStorage.setItem(STORAGE_KEYS.LAST_ACTIVE, currentDateTime);\n      const userData = {\n        ...user,\n        sessionId,\n        lastLogin: currentDateTime,\n        lastActive: currentDateTime\n      };\n      updateStoredUserData(userData);\n      console.log('Login successful:', {\n        userId: user._id,\n        nickname: user.nickname || API_CONFIG.CURRENT_USER,\n        sessionId,\n        timestamp: currentDateTime\n      });\n    }\n    localStorage.removeItem(STORAGE_KEYS.LOGIN_IN_PROGRESS);\n    return response;\n  } catch (error) {\n    localStorage.removeItem(STORAGE_KEYS.LOGIN_IN_PROGRESS);\n    throw handleApiError(error);\n  }\n};\nconst signupApi = async data => {\n  try {\n    const currentDateTime = getCurrentUTCDateTime();\n    const response = await Api.post('/users/signup', {\n      ...data,\n      timestamp: currentDateTime,\n      systemInfo: getSystemInfo()\n    });\n    toast.success('Registration successful! Please log in.');\n    return response;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\nconst createConfession = async confessionData => {\n  try {\n    var _response$data2;\n    const formData = new FormData();\n    const currentDateTime = getCurrentUTCDateTime();\n    const currentData = {\n      ...confessionData,\n      timestamp: currentDateTime,\n      createdBy: localStorage.getItem(STORAGE_KEYS.USER_ID)\n    };\n    Object.keys(currentData).forEach(key => {\n      if (key !== 'image') {\n        formData.append(key, currentData[key]);\n      }\n    });\n    if (confessionData.image) {\n      formData.append('image', confessionData.image);\n    }\n    const response = await Api.post('users/confessions/create', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    if ((_response$data2 = response.data) !== null && _response$data2 !== void 0 && _response$data2.success) {\n      toast.success('Confession created successfully!');\n    }\n    return response;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\nconst updateConfession = async (id, confessionData) => {\n  try {\n    var _response$data3;\n    const formData = new FormData();\n    const currentDateTime = getCurrentUTCDateTime();\n    const currentData = {\n      ...confessionData,\n      updatedAt: currentDateTime,\n      lastModifiedBy: localStorage.getItem(STORAGE_KEYS.USER_ID)\n    };\n    Object.keys(currentData).forEach(key => {\n      if (key !== 'image') {\n        formData.append(key, currentData[key]);\n      }\n    });\n    if (confessionData.image) {\n      formData.append('image', confessionData.image);\n    }\n    const response = await Api.put(`users/confessions/${id}`, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    if ((_response$data3 = response.data) !== null && _response$data3 !== void 0 && _response$data3.success) {\n      toast.success('Confession updated successfully!');\n    }\n    return response;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\nconst deleteConfession = async id => {\n  try {\n    var _response$data4;\n    const response = await Api.delete(`users/confessions/${id}`, {\n      data: {\n        timestamp: getCurrentUTCDateTime(),\n        deletedBy: localStorage.getItem(STORAGE_KEYS.USER_ID)\n      }\n    });\n    if ((_response$data4 = response.data) !== null && _response$data4 !== void 0 && _response$data4.success) {\n      toast.success('Confession deleted successfully!');\n    }\n    return response;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\nconst getUserConfessions = async () => {\n  try {\n    const userId = localStorage.getItem(STORAGE_KEYS.USER_ID);\n    return await Api.get(`users/confessions/my?timestamp=${getCurrentUTCDateTime()}&userId=${userId}`);\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\nconst getUserProfile = async () => {\n  try {\n    var _response$data5;\n    const userId = localStorage.getItem(STORAGE_KEYS.USER_ID);\n    if (!userId) throw new Error('User ID not found');\n    const response = await Api.get(`/users/profile/${userId}?timestamp=${getCurrentUTCDateTime()}`);\n    if ((_response$data5 = response.data) !== null && _response$data5 !== void 0 && _response$data5.data) {\n      updateStoredUserData(response.data.data);\n    }\n    return response;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\nconst updateUserProfile = async userData => {\n  try {\n    var _response$data6;\n    const currentDateTime = getCurrentUTCDateTime();\n    const response = await Api.put('/users/profile/update', {\n      ...userData,\n      timestamp: currentDateTime,\n      lastModified: currentDateTime\n    });\n    if ((_response$data6 = response.data) !== null && _response$data6 !== void 0 && _response$data6.success) {\n      updateStoredUserData(response.data.user);\n      toast.success('Profile updated successfully!');\n    }\n    return response;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\nconst changePassword = async passwordData => {\n  try {\n    var _response$data7;\n    const response = await Api.put('/users/change-password', {\n      ...passwordData,\n      timestamp: getCurrentUTCDateTime(),\n      userId: localStorage.getItem(STORAGE_KEYS.USER_ID)\n    });\n    if ((_response$data7 = response.data) !== null && _response$data7 !== void 0 && _response$data7.success) {\n      toast.success('Password changed successfully!');\n    }\n    return response;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\nconst forgotPasswordApi = async email => {\n  try {\n    const response = await Api.post('/users/forgot-password', {\n      email,\n      timestamp: getCurrentUTCDateTime()\n    });\n    toast.success('Password reset link sent to your email!');\n    return response;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\nconst resetPasswordApi = async (token, newPassword) => {\n  try {\n    const response = await Api.post(`/users/reset-password/${token}`, {\n      newPassword,\n      timestamp: getCurrentUTCDateTime()\n    });\n    toast.success('Password reset successful! Please login with your new password.');\n    return response;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\nconst submitContactUs = async contactData => {\n  try {\n    var _response$data8;\n    const response = await Api.post('/users/contactUs', {\n      ...contactData,\n      timestamp: getCurrentUTCDateTime(),\n      userId: localStorage.getItem(STORAGE_KEYS.USER_ID) || null\n    });\n    if ((_response$data8 = response.data) !== null && _response$data8 !== void 0 && _response$data8.success) {\n      toast.success('Message sent successfully!');\n    }\n    return response;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};","map":{"version":3,"names":["axios","toast","API_CONFIG","BASE_URL","process","env","REACT_APP_API_BASE_URL","TIMEOUT","parseInt","REACT_APP_API_TIMEOUT","SESSION_TIMEOUT","REACT_APP_SESSION_TIMEOUT","WARNING_TIME","REACT_APP_WARNING_TIME","CHECK_INTERVAL","REACT_APP_CHECK_INTERVAL","CURRENT_USER","STORAGE_KEYS","TOKEN","USER_ID","USER","REFRESH_TOKEN","LAST_ACTIVE","SESSION_ID","SESSION_START","SESSION_WARNING_SHOWN","REMEMBER_ME","REMEMBERED_EMAIL","LOGIN_IN_PROGRESS","getCurrentUTCDateTime","now","Date","year","getUTCFullYear","month","String","getUTCMonth","padStart","day","getUTCDate","hours","getUTCHours","minutes","getUTCMinutes","seconds","getUTCSeconds","getStoredUserData","userData","localStorage","getItem","JSON","parse","error","console","getSystemInfo","userAgent","navigator","platform","language","timezone","Intl","DateTimeFormat","resolvedOptions","timeZone","screenResolution","window","screen","width","height","timestamp","currentUser","nickname","clearStorage","preserveEmail","rememberedEmail","Object","keys","forEach","key","removeItem","sessionStorage","setItem","updateStoredUserData","currentDateTime","storedUser","lastActive","lastUpdated","systemInfo","stringify","Error","checkSessionExpiry","currentTime","getTime","lastActiveTime","timeDifference","warning","toastId","Api","create","baseURL","timeout","withCredentials","headers","interceptors","request","use","config","token","url","includes","location","href","Promise","reject","Authorization","metadata","startTime","requestId","Math","random","toString","substring","handleApiError","response","duration","_error$response","status","_error$response2","_error$response2$data","_error$response3","_error$response4","errorMessage","data","message","loginApi","_response$data","loginData","post","success","user","sessionId","_id","lastLogin","log","userId","signupApi","createConfession","confessionData","_response$data2","formData","FormData","currentData","createdBy","append","image","updateConfession","id","_response$data3","updatedAt","lastModifiedBy","put","deleteConfession","_response$data4","delete","deletedBy","getUserConfessions","get","getUserProfile","_response$data5","updateUserProfile","_response$data6","lastModified","changePassword","passwordData","_response$data7","forgotPasswordApi","email","resetPasswordApi","newPassword","submitContactUs","contactData","_response$data8"],"sources":["C:/uiux development/frontend/confessapp/src/apis/Api.js"],"sourcesContent":["import axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\n\r\n// Configuration Constants\r\nconst API_CONFIG = {\r\n    BASE_URL: process.env.REACT_APP_API_BASE_URL || 'http://localhost:5000/api',\r\n    TIMEOUT: parseInt(process.env.REACT_APP_API_TIMEOUT) || 30000,\r\n    SESSION_TIMEOUT: parseInt(process.env.REACT_APP_SESSION_TIMEOUT) || 60 * 1000,\r\n    WARNING_TIME: parseInt(process.env.REACT_APP_WARNING_TIME) || 45 * 1000,\r\n    CHECK_INTERVAL: parseInt(process.env.REACT_APP_CHECK_INTERVAL) || 10000,\r\n    CURRENT_USER: 'raj2080'\r\n};\r\n\r\n// Storage Keys\r\nconst STORAGE_KEYS = {\r\n    TOKEN: 'token',\r\n    USER_ID: 'userId',\r\n    USER: 'user',\r\n    REFRESH_TOKEN: 'refreshToken',\r\n    LAST_ACTIVE: 'lastActive',\r\n    SESSION_ID: 'sessionId',\r\n    SESSION_START: 'sessionStart',\r\n    SESSION_WARNING_SHOWN: 'sessionWarningShown',\r\n    REMEMBER_ME: 'rememberMe',\r\n    REMEMBERED_EMAIL: 'rememberedEmail',\r\n    LOGIN_IN_PROGRESS: 'loginInProgress'\r\n};\r\n\r\n// Utility Functions\r\nconst getCurrentUTCDateTime = () => {\r\n    const now = new Date();\r\n    const year = now.getUTCFullYear();\r\n    const month = String(now.getUTCMonth() + 1).padStart(2, '0');\r\n    const day = String(now.getUTCDate()).padStart(2, '0');\r\n    const hours = String(now.getUTCHours()).padStart(2, '0');\r\n    const minutes = String(now.getUTCMinutes()).padStart(2, '0');\r\n    const seconds = String(now.getUTCSeconds()).padStart(2, '0');\r\n    return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\r\n};\r\n\r\nconst getStoredUserData = () => {\r\n    try {\r\n        const userData = localStorage.getItem(STORAGE_KEYS.USER);\r\n        return userData ? JSON.parse(userData) : null;\r\n    } catch (error) {\r\n        console.error('Error getting user data:', error);\r\n        return null;\r\n    }\r\n};\r\n\r\nconst getSystemInfo = () => {\r\n    const userData = getStoredUserData();\r\n    return {\r\n        userAgent: navigator.userAgent,\r\n        platform: navigator.platform,\r\n        language: navigator.language,\r\n        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\r\n        screenResolution: `${window.screen.width}x${window.screen.height}`,\r\n        timestamp: getCurrentUTCDateTime(),\r\n        currentUser: userData?.nickname || API_CONFIG.CURRENT_USER\r\n    };\r\n};\r\n\r\nconst clearStorage = (preserveEmail = false) => {\r\n    if (localStorage.getItem(STORAGE_KEYS.LOGIN_IN_PROGRESS)) {\r\n        return;\r\n    }\r\n\r\n    const rememberedEmail = preserveEmail ? localStorage.getItem(STORAGE_KEYS.REMEMBERED_EMAIL) : null;\r\n    \r\n    Object.keys(localStorage).forEach(key => {\r\n        if (key !== STORAGE_KEYS.REMEMBERED_EMAIL || !preserveEmail) {\r\n            try {\r\n                localStorage.removeItem(key);\r\n                sessionStorage.removeItem(key);\r\n            } catch (error) {\r\n                console.error(`Error clearing storage key ${key}:`, error);\r\n            }\r\n        }\r\n    });\r\n\r\n    if (preserveEmail && rememberedEmail) {\r\n        localStorage.setItem(STORAGE_KEYS.REMEMBERED_EMAIL, rememberedEmail);\r\n    }\r\n};\r\n\r\nconst updateStoredUserData = (userData) => {\r\n    if (!userData) return;\r\n    \r\n    const currentDateTime = getCurrentUTCDateTime();\r\n    const storedUser = {\r\n        ...userData,\r\n        lastActive: currentDateTime,\r\n        lastUpdated: currentDateTime,\r\n        systemInfo: getSystemInfo()\r\n    };\r\n\r\n    try {\r\n        localStorage.setItem(STORAGE_KEYS.USER, JSON.stringify(storedUser));\r\n        localStorage.setItem(STORAGE_KEYS.LAST_ACTIVE, currentDateTime);\r\n    } catch (error) {\r\n        console.error('Error updating user data:', error);\r\n        throw new Error('Failed to update user data');\r\n    }\r\n};\r\n\r\nconst checkSessionExpiry = () => {\r\n    if (localStorage.getItem(STORAGE_KEYS.LOGIN_IN_PROGRESS)) {\r\n        return false;\r\n    }\r\n\r\n    const lastActive = localStorage.getItem(STORAGE_KEYS.LAST_ACTIVE);\r\n    if (!lastActive) return true;\r\n\r\n    const currentTime = new Date().getTime();\r\n    const lastActiveTime = new Date(lastActive).getTime();\r\n    const timeDifference = currentTime - lastActiveTime;\r\n\r\n    if (timeDifference > API_CONFIG.WARNING_TIME && \r\n        !localStorage.getItem(STORAGE_KEYS.SESSION_WARNING_SHOWN)) {\r\n        toast.warning('Your session will expire soon. Please save your work.', {\r\n            toastId: 'session-warning'\r\n        });\r\n        localStorage.setItem(STORAGE_KEYS.SESSION_WARNING_SHOWN, 'true');\r\n    }\r\n\r\n    return timeDifference > API_CONFIG.SESSION_TIMEOUT;\r\n};\r\n\r\n// API Instance\r\nconst Api = axios.create({\r\n    baseURL: API_CONFIG.BASE_URL,\r\n    timeout: API_CONFIG.TIMEOUT,\r\n    withCredentials: true,\r\n    headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n    }\r\n});\r\n\r\n// Request Interceptor\r\nApi.interceptors.request.use(\r\n    (config) => {\r\n        const token = localStorage.getItem(STORAGE_KEYS.TOKEN);\r\n        const currentDateTime = getCurrentUTCDateTime();\r\n        \r\n        if (!config.url.includes('/login') && checkSessionExpiry()) {\r\n            clearStorage(true);\r\n            window.location.href = '/login?session=expired';\r\n            return Promise.reject('Session expired');\r\n        }\r\n\r\n        if (token) {\r\n            config.headers.Authorization = `Bearer ${token}`;\r\n        }\r\n\r\n        config.metadata = {\r\n            startTime: new Date().getTime(),\r\n            requestId: Math.random().toString(36).substring(7),\r\n            timestamp: currentDateTime,\r\n            systemInfo: getSystemInfo()\r\n        };\r\n\r\n        localStorage.setItem(STORAGE_KEYS.LAST_ACTIVE, currentDateTime);\r\n        return config;\r\n    },\r\n    (error) => Promise.reject(handleApiError(error))\r\n);\r\n\r\n// Response Interceptor\r\nApi.interceptors.response.use(\r\n    (response) => {\r\n        const currentDateTime = getCurrentUTCDateTime();\r\n        localStorage.setItem(STORAGE_KEYS.LAST_ACTIVE, currentDateTime);\r\n        \r\n        return {\r\n            ...response,\r\n            timestamp: currentDateTime,\r\n            duration: new Date().getTime() - response.config.metadata.startTime\r\n        };\r\n    },\r\n    (error) => {\r\n        if (!error.config.url.includes('/login') && error.response?.status === 401) {\r\n            clearStorage(true);\r\n            window.location.href = '/login?session=expired';\r\n        }\r\n        return Promise.reject(handleApiError(error));\r\n    }\r\n);\r\n\r\n// Error Handler\r\nconst handleApiError = (error) => {\r\n    const errorMessage = error.response?.data?.message || error.message || 'An unexpected error occurred';\r\n    const currentDateTime = getCurrentUTCDateTime();\r\n    const userData = getStoredUserData();\r\n    \r\n    console.error('API Error:', {\r\n        message: errorMessage,\r\n        timestamp: currentDateTime,\r\n        currentUser: userData?.nickname || API_CONFIG.CURRENT_USER,\r\n        error: error\r\n    });\r\n\r\n    if (!error.config.url.includes('/login')) {\r\n        toast.error(errorMessage);\r\n    }\r\n\r\n    return {\r\n        message: errorMessage,\r\n        timestamp: currentDateTime,\r\n        status: error.response?.status,\r\n        data: error.response?.data\r\n    };\r\n};\r\n\r\n// API Functions\r\nconst loginApi = async (data) => {\r\n    try {\r\n        localStorage.setItem(STORAGE_KEYS.LOGIN_IN_PROGRESS, 'true');\r\n        const currentDateTime = getCurrentUTCDateTime();\r\n        \r\n        const loginData = {\r\n            ...data,\r\n            timestamp: currentDateTime,\r\n            systemInfo: getSystemInfo()\r\n        };\r\n\r\n        const response = await Api.post('/users/login', loginData);\r\n\r\n        if (response.data?.success) {\r\n            const { user, token } = response.data.data;\r\n            const sessionId = Math.random().toString(36).substring(7);\r\n            \r\n            localStorage.setItem(STORAGE_KEYS.TOKEN, token);\r\n            localStorage.setItem(STORAGE_KEYS.USER_ID, user._id);\r\n            localStorage.setItem(STORAGE_KEYS.SESSION_ID, sessionId);\r\n            localStorage.setItem(STORAGE_KEYS.SESSION_START, currentDateTime);\r\n            localStorage.setItem(STORAGE_KEYS.LAST_ACTIVE, currentDateTime);\r\n            \r\n            const userData = {\r\n                ...user,\r\n                sessionId,\r\n                lastLogin: currentDateTime,\r\n                lastActive: currentDateTime\r\n            };\r\n\r\n            updateStoredUserData(userData);\r\n\r\n            console.log('Login successful:', {\r\n                userId: user._id,\r\n                nickname: user.nickname || API_CONFIG.CURRENT_USER,\r\n                sessionId,\r\n                timestamp: currentDateTime\r\n            });\r\n        }\r\n        \r\n        localStorage.removeItem(STORAGE_KEYS.LOGIN_IN_PROGRESS);\r\n        return response;\r\n    } catch (error) {\r\n        localStorage.removeItem(STORAGE_KEYS.LOGIN_IN_PROGRESS);\r\n        throw handleApiError(error);\r\n    }\r\n};\r\n\r\nconst signupApi = async (data) => {\r\n    try {\r\n        const currentDateTime = getCurrentUTCDateTime();\r\n        const response = await Api.post('/users/signup', {\r\n            ...data,\r\n            timestamp: currentDateTime,\r\n            systemInfo: getSystemInfo()\r\n        });\r\n        toast.success('Registration successful! Please log in.');\r\n        return response;\r\n    } catch (error) {\r\n        throw handleApiError(error);\r\n    }\r\n};\r\n\r\nconst createConfession = async (confessionData) => {\r\n    try {\r\n        const formData = new FormData();\r\n        const currentDateTime = getCurrentUTCDateTime();\r\n        \r\n        const currentData = {\r\n            ...confessionData,\r\n            timestamp: currentDateTime,\r\n            createdBy: localStorage.getItem(STORAGE_KEYS.USER_ID)\r\n        };\r\n\r\n        Object.keys(currentData).forEach(key => {\r\n            if (key !== 'image') {\r\n                formData.append(key, currentData[key]);\r\n            }\r\n        });\r\n        \r\n        if (confessionData.image) {\r\n            formData.append('image', confessionData.image);\r\n        }\r\n\r\n        const response = await Api.post('users/confessions/create', formData, {\r\n            headers: { 'Content-Type': 'multipart/form-data' }\r\n        });\r\n\r\n        if (response.data?.success) {\r\n            toast.success('Confession created successfully!');\r\n        }\r\n\r\n        return response;\r\n    } catch (error) {\r\n        throw handleApiError(error);\r\n    }\r\n};\r\n\r\nconst updateConfession = async (id, confessionData) => {\r\n    try {\r\n        const formData = new FormData();\r\n        const currentDateTime = getCurrentUTCDateTime();\r\n        \r\n        const currentData = {\r\n            ...confessionData,\r\n            updatedAt: currentDateTime,\r\n            lastModifiedBy: localStorage.getItem(STORAGE_KEYS.USER_ID)\r\n        };\r\n\r\n        Object.keys(currentData).forEach(key => {\r\n            if (key !== 'image') {\r\n                formData.append(key, currentData[key]);\r\n            }\r\n        });\r\n        \r\n        if (confessionData.image) {\r\n            formData.append('image', confessionData.image);\r\n        }\r\n\r\n        const response = await Api.put(`users/confessions/${id}`, formData, {\r\n            headers: { 'Content-Type': 'multipart/form-data' }\r\n        });\r\n\r\n        if (response.data?.success) {\r\n            toast.success('Confession updated successfully!');\r\n        }\r\n\r\n        return response;\r\n    } catch (error) {\r\n        throw handleApiError(error);\r\n    }\r\n};\r\n\r\nconst deleteConfession = async (id) => {\r\n    try {\r\n        const response = await Api.delete(`users/confessions/${id}`, {\r\n            data: {\r\n                timestamp: getCurrentUTCDateTime(),\r\n                deletedBy: localStorage.getItem(STORAGE_KEYS.USER_ID)\r\n            }\r\n        });\r\n        if (response.data?.success) {\r\n            toast.success('Confession deleted successfully!');\r\n        }\r\n        return response;\r\n    } catch (error) {\r\n        throw handleApiError(error);\r\n    }\r\n};\r\n\r\nconst getUserConfessions = async () => {\r\n    try {\r\n        const userId = localStorage.getItem(STORAGE_KEYS.USER_ID);\r\n        return await Api.get(`users/confessions/my?timestamp=${getCurrentUTCDateTime()}&userId=${userId}`);\r\n    } catch (error) {\r\n        throw handleApiError(error);\r\n    }\r\n};\r\n\r\nconst getUserProfile = async () => {\r\n    try {\r\n        const userId = localStorage.getItem(STORAGE_KEYS.USER_ID);\r\n        if (!userId) throw new Error('User ID not found');\r\n\r\n        const response = await Api.get(`/users/profile/${userId}?timestamp=${getCurrentUTCDateTime()}`);\r\n        if (response.data?.data) {\r\n            updateStoredUserData(response.data.data);\r\n        }\r\n        return response;\r\n    } catch (error) {\r\n        throw handleApiError(error);\r\n    }\r\n};\r\n\r\nconst updateUserProfile = async (userData) => {\r\n    try {\r\n        const currentDateTime = getCurrentUTCDateTime();\r\n        const response = await Api.put('/users/profile/update', {\r\n            ...userData,\r\n            timestamp: currentDateTime,\r\n            lastModified: currentDateTime\r\n        });\r\n        \r\n        if (response.data?.success) {\r\n            updateStoredUserData(response.data.user);\r\n            toast.success('Profile updated successfully!');\r\n        }\r\n        \r\n        return response;\r\n    } catch (error) {\r\n        throw handleApiError(error);\r\n    }\r\n};\r\n\r\nconst changePassword = async (passwordData) => {\r\n    try {\r\n        const response = await Api.put('/users/change-password', {\r\n            ...passwordData,\r\n            timestamp: getCurrentUTCDateTime(),\r\n            userId: localStorage.getItem(STORAGE_KEYS.USER_ID)\r\n        });\r\n        \r\n        if (response.data?.success) {\r\n            toast.success('Password changed successfully!');\r\n        }\r\n        \r\n        return response;\r\n    } catch (error) {\r\n        throw handleApiError(error);\r\n    }\r\n};\r\n\r\nconst forgotPasswordApi = async (email) => {\r\n    try {\r\n        const response = await Api.post('/users/forgot-password', {\r\n            email,\r\n            timestamp: getCurrentUTCDateTime()\r\n        });\r\n        toast.success('Password reset link sent to your email!');\r\n        return response;\r\n    } catch (error) {\r\n        throw handleApiError(error);\r\n    }\r\n};\r\n\r\nconst resetPasswordApi = async (token, newPassword) => {\r\n    try {\r\n        const response = await Api.post(`/users/reset-password/${token}`, {\r\n            newPassword,\r\n            timestamp: getCurrentUTCDateTime()\r\n        });\r\n        toast.success('Password reset successful! Please login with your new password.');\r\n        return response;\r\n    } catch (error) {\r\n        throw handleApiError(error);\r\n    }\r\n};\r\n\r\nconst submitContactUs = async (contactData) => {\r\n    try {\r\n        const response = await Api.post('/users/contactUs', {\r\n            ...contactData,\r\n            timestamp: getCurrentUTCDateTime(),\r\n            userId: localStorage.getItem(STORAGE_KEYS.USER_ID) || null\r\n        });\r\n        \r\n        if (response.data?.success) {\r\n            toast.success('Message sent successfully!');\r\n        }\r\n        \r\n        return response;\r\n    } catch (error) {\r\n        throw handleApiError(error);\r\n    }\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}