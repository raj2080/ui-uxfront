{"ast":null,"code":"var _jsxFileName = \"C:\\\\uiux development\\\\frontend\\\\confessapp\\\\src\\\\pages\\\\confession\\\\EditConfession.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { updateConfession } from '../../apis/Api';\nimport './EditConfession.css'; // Ensure the path is correct\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EditConfession = () => {\n  _s();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const confession = location.state.confession;\n  const [editContent, setEditContent] = useState({\n    content: confession.content,\n    title: confession.title,\n    category: confession.category,\n    imageUrl: confession.imageUrl\n  });\n  const [selectedFile, setSelectedFile] = useState(null);\n  const handleEditChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setEditContent(prevContent => ({\n      ...prevContent,\n      [name]: value\n    }));\n  };\n  const handleImageChange = e => {\n    const file = e.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setEditContent(prevContent => ({\n          ...prevContent,\n          imageUrl: reader.result\n        }));\n      };\n      reader.readAsDataURL(file);\n      setSelectedFile(file);\n    }\n  };\n  const handleEditSubmit = async confessionId => {\n    try {\n      const formData = new FormData();\n      formData.append('content', editContent.content);\n      formData.append('title', editContent.title);\n      formData.append('category', editContent.category);\n      if (selectedFile) {\n        formData.append('image', selectedFile);\n      }\n      await updateConfession(confessionId, formData);\n      navigate('/confessions');\n    } catch (error) {\n      console.error('Failed to update confession:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"edit-confession-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Edit Confession\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: e => {\n        e.preventDefault();\n        handleEditSubmit(confession._id);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"title\",\n        value: editContent.title,\n        onChange: handleEditChange,\n        className: \"edit-input\",\n        placeholder: \"Title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"content\",\n        value: editContent.content,\n        onChange: handleEditChange,\n        className: \"edit-textarea\",\n        placeholder: \"Content\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"category\",\n        value: editContent.category,\n        onChange: handleEditChange,\n        className: \"edit-input\",\n        placeholder: \"Category\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        name: \"image\",\n        onChange: handleImageChange,\n        className: \"edit-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), editContent.imageUrl && /*#__PURE__*/_jsxDEV(\"img\", {\n        src: editContent.imageUrl,\n        alt: \"Confession\",\n        className: \"confession-image-preview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"save-button\",\n        children: \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"cancel-button\",\n        onClick: () => navigate('/confessions'),\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n_s(EditConfession, \"Bb9mmYVFxKme6IPi5za+hdvrSJU=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = EditConfession;\nexport default EditConfession;\nvar _c;\n$RefreshReg$(_c, \"EditConfession\");","map":{"version":3,"names":["React","useState","useLocation","useNavigate","updateConfession","jsxDEV","_jsxDEV","EditConfession","_s","location","navigate","confession","state","editContent","setEditContent","content","title","category","imageUrl","selectedFile","setSelectedFile","handleEditChange","e","name","value","target","prevContent","handleImageChange","file","files","reader","FileReader","onloadend","result","readAsDataURL","handleEditSubmit","confessionId","formData","FormData","append","error","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","preventDefault","_id","type","onChange","placeholder","src","alt","onClick","_c","$RefreshReg$"],"sources":["C:/uiux development/frontend/confessapp/src/pages/confession/EditConfession.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { updateConfession } from '../../apis/Api';\r\nimport './EditConfession.css'; // Ensure the path is correct\r\n\r\nconst EditConfession = () => {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const confession = location.state.confession;\r\n\r\n  const [editContent, setEditContent] = useState({\r\n    content: confession.content,\r\n    title: confession.title,\r\n    category: confession.category,\r\n    imageUrl: confession.imageUrl,\r\n  });\r\n\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n\r\n  const handleEditChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setEditContent((prevContent) => ({\r\n      ...prevContent,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  const handleImageChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        setEditContent((prevContent) => ({\r\n          ...prevContent,\r\n          imageUrl: reader.result,\r\n        }));\r\n      };\r\n      reader.readAsDataURL(file);\r\n      setSelectedFile(file);\r\n    }\r\n  };\r\n\r\n  const handleEditSubmit = async (confessionId) => {\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('content', editContent.content);\r\n      formData.append('title', editContent.title);\r\n      formData.append('category', editContent.category);\r\n      if (selectedFile) {\r\n        formData.append('image', selectedFile);\r\n      }\r\n\r\n      await updateConfession(confessionId, formData);\r\n      navigate('/confessions');\r\n    } catch (error) {\r\n      console.error('Failed to update confession:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"edit-confession-container\">\r\n      <h2>Edit Confession</h2>\r\n      <form\r\n        onSubmit={(e) => {\r\n          e.preventDefault();\r\n          handleEditSubmit(confession._id);\r\n        }}\r\n      >\r\n        <input\r\n          type=\"text\"\r\n          name=\"title\"\r\n          value={editContent.title}\r\n          onChange={handleEditChange}\r\n          className=\"edit-input\"\r\n          placeholder=\"Title\"\r\n        />\r\n        <textarea\r\n          name=\"content\"\r\n          value={editContent.content}\r\n          onChange={handleEditChange}\r\n          className=\"edit-textarea\"\r\n          placeholder=\"Content\"\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          name=\"category\"\r\n          value={editContent.category}\r\n          onChange={handleEditChange}\r\n          className=\"edit-input\"\r\n          placeholder=\"Category\"\r\n        />\r\n        <input\r\n          type=\"file\"\r\n          name=\"image\"\r\n          onChange={handleImageChange}\r\n          className=\"edit-input\"\r\n        />\r\n        {editContent.imageUrl && (\r\n          <img\r\n            src={editContent.imageUrl}\r\n            alt=\"Confession\"\r\n            className=\"confession-image-preview\"\r\n          />\r\n        )}\r\n        <button type=\"submit\" className=\"save-button\">\r\n          Save\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          className=\"cancel-button\"\r\n          onClick={() => navigate('/confessions')}\r\n        >\r\n          Cancel\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditConfession;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}